---
import { ThemeToggle } from './ThemeToggle';

const base = import.meta.env.BASE_URL;

const navItems = [
  { href: base, label: 'コスト計算' },
  { href: `${base}guide/`, label: 'ガイド' },
  { href: `${base}faq/`, label: 'FAQ' },
];

const currentPath = Astro.url.pathname;

const isCurrentPage = (href: string) => {
  if (href === base) {
    return currentPath === base;
  }
  return currentPath.startsWith(href);
};
---

<a
  href="#main"
  class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50 focus:bg-white focus:text-blue-600 focus:px-4 focus:py-2 focus:rounded focus:shadow-lg dark:focus:bg-gray-800 dark:focus:text-blue-400"
>
  メインコンテンツへスキップ
</a>
<header class="border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800">
  <div class="container mx-auto px-3 sm:px-4 md:px-6">
    <div class="flex items-center justify-between h-14">
      <div class="flex items-center gap-2 sm:gap-6">
        <a
          href={base}
          class="text-lg font-bold text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors whitespace-nowrap"
        >
          EXVS2 コスト計算機
        </a>
        <nav aria-label="メインナビゲーション">
          <ul class="flex items-center gap-0.5 sm:gap-1">
            {
              navItems.map((item) => {
                const current = isCurrentPage(item.href);
                return (
                  <li>
                    <a
                      href={item.href}
                      aria-current={current ? 'page' : undefined}
                      class:list={[
                        'px-2 sm:px-3 py-1.5 rounded-md text-sm font-medium transition-colors whitespace-nowrap',
                        current
                          ? 'bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300'
                          : 'text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 hover:bg-slate-100 dark:hover:bg-slate-700',
                      ]}
                    >
                      {item.label}
                    </a>
                  </li>
                );
              })
            }
          </ul>
        </nav>
      </div>
      <ThemeToggle client:load />
    </div>
  </div>
</header>
