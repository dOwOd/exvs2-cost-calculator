/**
 * FAQデータ定義
 * カテゴリ別にグルーピングされたFAQ一覧
 */

/** FAQカテゴリ定義 */
export type FaqCategory = {
  id: 'basic-rules' | 'ex-over-limit' | 'ex-burst' | 'tactics' | 'calculator';
  label: string;
};

/** FAQ項目 */
export type FaqItem = {
  question: string;
  answer: string | string[];
  category: FaqCategory['id'];
  formula?: string;
  link?: {
    url: string;
    text: string;
  };
};

/** カテゴリ一覧（表示順） */
export const faqCategories: FaqCategory[] = [
  { id: 'basic-rules', label: '基本ルール' },
  { id: 'ex-over-limit', label: 'EXオーバーリミット' },
  { id: 'ex-burst', label: 'EXバースト' },
  { id: 'tactics', label: '戦術・編成' },
  { id: 'calculator', label: '計算・ツール' },
];

/** FAQ一覧 */
export const faqs: FaqItem[] = [
  // --- 基本ルール ---
  {
    question: 'チーム共有コスト6000とは？',
    answer: 'EXVS2では、2機編成のチームが合計6000のコストを共有する。A機とB機が別々のコストを持つのではなく、チーム全体で1つの残コストを管理する仕組みである。機体が撃墜されると、その機体のコスト分が残コストから差し引かれ、残コストが0以下になると敗北となる。',
    category: 'basic-rules',
    link: { url: 'https://gundam-vs.jp/extreme/ac2ib/howto/', text: '公式サイト - 遊び方ルール' },
  },
  {
    question: '各コスト帯の特徴は？',
    answer: [
      '3000コスト: 最高性能だが、2回撃墜されるだけで敗北に直結するためコスト管理が最もシビアなコスト帯である。',
      '2500コスト: バランスが良く、どのコストと組んでも安定する。',
      '2000コスト: 性能控えめだが総耐久値が高く、EXバーストゲージの管理がしやすい利点がある。',
      '1500コスト: 基本性能こそ低いが、特定の局面で高コスト機を上回る爆発力を持つ機体が多い。3000と組んだ場合にEXオーバーリミットが発動できない撃墜順が生まれやすく、上級者向けのコスト帯である。',
    ],
    category: 'basic-rules',
  },
  {
    question: 'コストオーバーとは？',
    answer: '撃墜された機体が再出撃する際、残コストがその機体のコスト未満だと「コストオーバー」状態になり、初期耐久値より低い耐久で復帰する。高コストの機体ほどペナルティが深刻で、例えば同じ残コスト500でも3000コスト機は耐久約18%、2000コスト機は耐久25%で復帰するなど、高コストほど復帰耐久が大幅に低くなる。',
    category: 'basic-rules',
  },
  // --- EXオーバーリミット ---
  {
    question: 'EXオーバーリミットの発動条件は？',
    answer: 'チームの残コストが編成内の最低コスト以下になった時に1度だけ発動可能となる。つまり「自機と僚機のいずれが撃墜されても敗北する状況」で発動できる。',
    formula: '発動条件: 残コスト ≤ min(A機コスト, B機コスト)',
    category: 'ex-over-limit',
  },
  {
    question: 'EXオーバーリミットの効果は？',
    answer: '発動中は10秒間、攻撃力・機動力が上昇し、100ダメージ分のバリアを展開する。さらに、発動中に与えたダメージの30%を自身の耐久値として回復できる（回復上限はフル耐久まで）。',
    category: 'ex-over-limit',
  },
  {
    question: 'EXオーバーリミットが発動できない編成パターンはあるか？',
    answer: '異コスト編成では、低コスト側が一度も撃墜されずに高コスト側だけが撃墜され続けるとEXオーバーリミットが発動できないまま敗北する。例えば3000+2500で2500が無傷のまま3000が2連続撃墜された場合である。3000+1500の編成は特に厳しく、EXオーバーリミット発動不可となる撃墜順が複数存在する。2500+1500でも、お互い1回ずつ撃墜された後に2500が撃墜されるとEXオーバーリミットが発動できないなど、注意が必要なパターンが多い。逆に、同コスト編成（3000+3000、2500+2500、2000+2000、1500+1500）ではどの撃墜順でもEXオーバーリミットが発動可能である。',
    category: 'ex-over-limit',
  },
  {
    question: 'EXオーバーリミットの発動まで3秒かかるとは？',
    answer: '僚機が撃墜されてから復活するまで約3秒かかる。その間はEXオーバーリミットが発動しないため、両機が瀕死の状態で片方が撃墜されると、残りの機体もEXオーバーリミット発動前に撃墜されて敗北する危険性がある。特に低コスト同士の編成では、強気な立ち回りで耐久を減らしすぎた結果、このパターンに陥るリスクがある。',
    category: 'ex-over-limit',
  },
  // --- EXバースト ---
  {
    question: 'EXバーストとは？',
    answer: 'EXバーストはEXオーバーリミットとは別のシステムである。ダメージを与える・受けることでバーストゲージが溜まり、発動すると一時的にパワーアップする。ゲージ100%で発動する「ハーフバースト」は効果時間が短い代わりに1試合で複数回使え、ゲージ200%で発動する「フルバースト」は強力だが使える回数が少なくなる。EXバースト中に撃墜されるとゲージが大きく無駄になるため、使いどころが重要である。',
    category: 'ex-burst',
    link: { url: 'https://gundam-vs.jp/extreme/ac2ib/howto/rules/ex_burst/', text: '公式サイト - EXバースト解説' },
  },
  {
    question: '「覚醒」と「EXバースト」の表現の違いは？',
    answer: 'EXバーストが正式名称で、「覚醒」はプレイヤー間で広く使われている俗称である。同様に、ゲージ100%で発動するハーフバーストは「半覚」、ゲージ200%で発動するフルバーストは「全覚」と呼ばれることが多い。',
    category: 'ex-burst',
  },
  {
    question: 'EXバーストとEXオーバーリミットの違いは？',
    answer: 'EXバーストは各機体が個別に使用し、ゲージ蓄積で1試合に複数回発動できる。一方、EXオーバーリミットはチーム全体で1試合に1回のみ、残コストが最低コスト以下になった時に発動する。バーストタイプ(Fバースト・Sバーストなど)に応じた格闘や射撃の強化がEXバーストの特徴で、EXオーバーリミットは攻撃力・機動力上昇に加えてバリアと耐久回復という独自の効果を持つ。',
    category: 'ex-burst',
  },
  // --- 戦術・編成 ---
  {
    question: 'なぜ高コスト先撃墜がセオリーなのか？',
    answer: '低コストが先に撃墜されると、高コスト機がコストオーバーで低耐久復帰になる。高性能な機体が低耐久で慎重に動かざるを得なくなり、相手2機に集中攻撃される不利な展開になりやすいためである。ただし、EXVS2ではEXオーバーリミットの仕組みにより、高コスト先撃墜後に続けて撃墜されるとEXオーバーリミットが発動できずに敗北するリスクもあり、従来作品よりも高コスト先撃墜のリスクが増している。',
    category: 'tactics',
  },
  {
    question: '低コスト同士の編成（2000+2000や1500+1500）の特徴は？',
    answer: '低コスト同士ではコストオーバーが発生せず、フル耐久で復帰できる。ただし、フル耐久でEXオーバーリミットが発動すると耐久回復の恩恵を受けにくいデメリットがある。そのため、EXオーバーリミット発動前にある程度耐久を減らしておく強気な立ち回りも選択肢になるが、両機が瀕死で片方が撃墜されるとEXオーバーリミット発動までの約3秒で残りの機体も撃墜される危険性がある。2000+2000では両前衛をベースに交互に撃墜される展開が原則である。',
    category: 'tactics',
  },
  {
    question: '1500コストは初心者向けか？',
    answer: '1500コストは初心者にはおすすめできない。耐久力とブースト性能が低く、EXバーストの使いどころが極めて難しいコスト帯である。また、3000と組んだ場合にEXオーバーリミットが発動できない撃墜順がほぼ必ず存在し、高い経験とテクニック、機体個別のやり込みが求められる。初心者には、バランスが良くどのコストと組んでも安定する2500コストをおすすめする。',
    category: 'tactics',
  },
  {
    question: '編成ごとの基本的な方針は？',
    answer: '3000+2500や3000+2000では基本的に3000が前衛、低コストが後衛を務める。2500+2500や2500+2000ではダブル前衛をベースに耐久調整しながら立ち回る。2000+2000でも両前衛が原則で、味方が先に撃墜された場合は残った側も守りに入らず積極的に前に出ることが重要である。2000+1500では1500が2回撃墜される展開が総耐久的に有利である。編成ごとの詳細は「コストの仕組みとセオリー解説」ページを参照されたい。',
    category: 'tactics',
  },
  // --- 計算・ツール ---
  {
    question: '総耐久値の計算方法は？',
    answer: '総耐久値 = 初期耐久A + 初期耐久B + 再出撃時の耐久値の合計である。初期耐久値を含む点に注意が必要である。この値が高いほど、チーム全体の継戦能力が高くなる。',
    category: 'calculator',
  },
  {
    question: '最短敗北時の耐久値とは？',
    answer: '片方の機体だけが集中的に狙われ続けた場合の耐久値である。相手が最も効率的に攻めてきた場合の最悪ケースを示している。',
    formula: 'min(ceil(6000 ÷ コストA) × 耐久A, ceil(6000 ÷ コストB) × 耐久B)',
    category: 'calculator',
  },
  {
    question: 'このツールの活用方法は？',
    answer: 'A機・B機のコストと耐久値を選択すると、全撃墜順パターンの総耐久値やEXオーバーリミット発動条件が自動計算される。事前に撃墜順ごとの展開を把握しておくことで、試合中の立ち回りや意思決定に役立てることができる。',
    category: 'calculator',
  },
];

/** 指定カテゴリのFAQを取得 */
export const getFaqsByCategory = (categoryId: FaqCategory['id']): FaqItem[] => {
  return faqs.filter((faq) => faq.category === categoryId);
};
