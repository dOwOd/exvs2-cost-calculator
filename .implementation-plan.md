# 実装計画

## 現在のステータス: v1.0 完成 ✅

**最終更新**: 2026-01-25

---

## v1.0 実装完了内容

### コア機能

- ✅ 編成選択UI（コスト + 耐久値の組み合わせ）
  - コスト選択: 3000 / 2500 / 2000 / 1500
  - 耐久値選択: コストごとのドロップダウン
- ✅ 撃墜順パターン自動生成（16通り → 重複排除）
- ✅ コスト推移計算
  - チーム共有コスト管理（初期6000）
  - リスポーン耐久値変動
  - コストオーバー判定
- ✅ EXオーバーリミット発動判定
- ✅ 総耐久値計算（初期耐久 + リスポーン耐久）
- ✅ 最短での敗北時の耐久値計算

### UI/UX機能

- ✅ 総耐久最大順でソート（全パターン表示）
- ✅ EXオーバーリミット発動可能フィルター
- ✅ コストバーによる視覚的表現
  - 🔴 敗北（残コスト≤0）
  - 🟠 EX発動可能（≤minCost）- ピンチ警告
  - 🟡 コストオーバー
  - 🔵 通常
- ✅ 最短での敗北時の耐久値を総耐久と併せて表示
- ✅ 読みやすいフォントサイズ
  - ランク番号: 30px (text-3xl)
  - パターン文字列: 24px (text-2xl)
  - 総耐久値: 30px (text-3xl)
  - テーブル: 18px (text-lg)

### テスト

- ✅ 46件のテストケース（全て通過）
  - 計算ロジックのテスト
  - EXオーバーリミット判定のテスト
  - リスポーン耐久値テーブルのテスト
  - 最短での敗北時の耐久値テスト

### ドキュメント

- ✅ README.md - プロジェクト概要と使い方
- ✅ CONTRIBUTING.md - 開発ルールとコミット規約
- ✅ docs/SPECIFICATION.md - 詳細技術仕様
- ✅ CLAUDE.md - セッション間の引き継ぎ情報

---

## v1.0 スコープ外（意図的に除外）

以下の機能は v1.0 では**意図的に実装していません**：

- ❌ バースト機能
- ❌ コスト推移グラフ（数値テーブルのみ実装）
- ❌ スマートフォン対応
- ❌ 機体名管理（コスト+耐久の組み合わせのみ）

---

## v1.1 以降の候補機能

### 優先度: 高

- [ ] **機体名データベース**
  - 実際の機体名を選択できるUI
  - コスト+耐久値を機体名と紐付け
  - データ: `src/data/mobilesuitsData.ts`

- [ ] **コスト推移グラフ**
  - Chart.jsまたはRechartsを使用
  - 残コストの推移を折れ線グラフで表示
  - EX発動可能ラインを表示

### 優先度: 中

- [ ] **スマートフォン対応**
  - レスポンシブデザインの改善
  - タッチ操作の最適化
  - 縦画面レイアウト

- [ ] **パターン比較機能**
  - 複数パターンを選択して比較
  - 差分をハイライト表示

- [ ] **URLシェア機能**
  - 編成をURLパラメータで保存
  - シェア用URL生成

### 優先度: 低

- [ ] **バースト機能対応**
  - バースト使用タイミングの最適化
  - バースト込みの総耐久計算

- [ ] **プリセット編成**
  - よく使う編成を保存
  - LocalStorageで管理

- [ ] **ダークモード切り替え**
  - 現在はダークモードのみ
  - ライトモードの追加

---

## 技術的改善案

### パフォーマンス

- [ ] パターン生成の最適化（現在16通り生成 → 早期枝刈り）
- [ ] コンポーネントのメモ化（React.memo / useMemo）

### コード品質

- [ ] E2Eテストの追加（Playwright）
- [ ] アクセシビリティ改善（ARIA属性）
- [ ] エラーハンドリングの強化

### 開発環境

- [ ] CI/CDパイプライン構築（GitHub Actions）
- [ ] ステージング環境の構築
- [ ] パフォーマンス計測の自動化

---

## 次回セッション開始時のアクション

### 新規機能開発の場合

1. `.claude-rules.md` を読む
2. `CLAUDE.md` を読む
3. `README.md` を読む
4. `docs/SPECIFICATION.md` を読む
5. この `.implementation-plan.md` で追加する機能を確認
6. ユーザーと機能の詳細を議論
7. テスト駆動開発で実装

### バグ修正の場合

1. `.claude-rules.md` を読む
2. `CLAUDE.md` を読む
3. 関連するテストケースを確認
4. 再現手順を確認
5. テストを追加してから修正

---

## 開発環境

### 必須

- Node.js 24.x 以上
- pnpm 9.x 以上
- Docker & Docker Compose（オプション）

### セットアップ

```bash
# ローカル環境
pnpm install
pnpm dev
pnpm test

# Docker環境
docker compose up dev
docker compose exec dev pnpm test
```

---

## 参考リンク

### プロジェクト内

- [README.md](./README.md) - プロジェクト概要
- [CONTRIBUTING.md](./CONTRIBUTING.md) - 開発ルール
- [docs/SPECIFICATION.md](./docs/SPECIFICATION.md) - 技術仕様
- [CLAUDE.md](./CLAUDE.md) - セッション管理

### 外部

- [EXVS2 公式サイト](https://gs.bandainamco-ol.co.jp/exvs2/)
- [EXVS2XB攻略wiki](https://wikiwiki.jp/exvs2xb/)
- [Astro ドキュメント](https://docs.astro.build)

---

**作成日**: 2026-01-24
**最終更新**: 2026-01-25
**次回更新**: v1.1開発開始時
