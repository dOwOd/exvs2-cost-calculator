---
name: docs
description: セッション中の変更に基づいてドキュメントを更新
---

# ドキュメント更新スキル

セッション中に行った変更を分析し、関連ドキュメントを更新する。

## 引数

- `引数なし`: セッション中の変更を分析して更新対象を自動判定
- `ファイルパス`: 指定ファイルのみ更新（例: `/docs CLAUDE.md`）

## 実行手順

### Step 1: 変更内容の分析

1. `git diff main...HEAD --stat` で変更ファイル一覧を取得
2. `git log main...HEAD --oneline` でコミット履歴を確認
3. 変更内容を以下のカテゴリに分類:
   - **技術スタック変更**: ライブラリ追加/削除、設定変更
   - **ファイル構造変更**: 新規ファイル、ファイル移動/削除
   - **ゲーム仕様変更**: 計算ロジック、データ変更
   - **UI実装パターン変更**: コンポーネント追加/変更
   - **開発ルール変更**: ワークフロー、規約変更

### Step 2: 更新対象の判定

| 変更カテゴリ | 更新対象ファイル |
|---|---|
| 技術スタック変更 | `CLAUDE.md`（依存関係、設定） |
| ファイル構造変更 | `CLAUDE.md`（ファイル構造マップ） |
| ゲーム仕様変更 | `docs/SPECIFICATION.md`, `.claude/rules/specifications.md` |
| UI実装パターン変更 | `.claude/rules/ui-patterns.md` |
| 開発ルール変更 | `.claude/rules/development.md` |
| よくある間違い発見 | `.claude/rules/common-mistakes.md` |
| Git操作ルール変更 | `.claude/rules/git-workflow.md` |
| 戦術知識変更 | `docs/GAME_KNOWLEDGE.md`, `.claude/rules/game-tactics.md` |

### Step 3: ユーザーに確認

更新対象と更新内容をリストアップしてユーザーに提示:

```
以下のドキュメント更新を提案します:

1. CLAUDE.md
   - ファイル構造マップに `xxx` を追加
   - スキルセクションに `xxx` を追加

2. docs/SPECIFICATION.md
   - セクション X に `xxx` を追記

更新してよろしいですか？
```

### Step 4: 更新実行

ユーザー承認後に更新を実行する。

### Step 5: コミット

更新完了後、`/commit` スキルを使用してコミットを提案:

```
Docs: {更新内容の要約}
```

## 更新しない内容

以下は一時的な情報のためドキュメントに記録しない:

- 一時的なデバッグ情報
- 特定のPRやブランチに関する情報
- 確定していない仮の決定事項

## 注意事項

- 自動更新しない。必ずユーザーに確認を取ってから更新する
- 既存の記述と矛盾する更新がないか確認する
- CLAUDE.md のファイル構造マップは実際のファイルと一致させる
